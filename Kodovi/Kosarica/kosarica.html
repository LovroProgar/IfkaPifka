<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Košarica</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="../Homepage/css.css">
    <link rel="stylesheet" href="../Kosarica/kosarica.css">
</head>
<body>
    <nav>
        <div class="allTogether">
            <a href="../Homepage/ifkaPifka.html">
                <img src="../../Stvari/WebpSlikeConvertane/logoTransWebp.webp" class="logo">
            </a>
            <div class="contentCont">
            <div class="content">
                <button class="ceramics" onclick="location.href='../Keramika/keramika.html'">Keramika</button>
                <a href="../O Nama/Onama.html">O nama</a>
                <a href="../Kontakt/kontakt.html">Kontakt</a>
                <a href="../Prijava/prijava.html">Prijava</a>
                <div class="shoppingCartCont" id="shoppingCart">
                    <i class="bi bi-cart-fill" id="icon"></i>
                </div>
            </div>
            </div>
            <div class="hamburger-menu">
                <i class="bi bi-list" id="hamburger"></i>
            </div>
        </div>
        
        
        <div class="mobile-menu" id="mobileMenu">
            <a href="../O Nama/Onama.html">O nama</a>
            <a href="../Kontakt/kontakt.html">Kontakt</a>
            <a href="../Prijava/prijava.html">Prijava</a>
            <button class="ceramics" onclick="location.href='../Keramika/keramika.html'">Keramika</button>
        </div>
    </nav>


<main class="mainConts">

    <section class="cartSection" id="cartSection">
        
        <div id="cartItems"></div>
        <div id="cartContainer" class="container mt-5"></div>

    </section>
    <section class="relatedProductsCont">
        <div class="title">
            <h3>Povezani proizvodi</h3>
        </div>
        <div class="productsCont">
            <div class="cont">
                <a href="../EspressoSalica/espressoSalicaITanjuric.html" class="articleLink">
                    <img src="../../Stvari/WebpSlikeConvertane/Proizvodi/EspresoSalica/espresoSalica2.webp" class="img-fluid">
                    <h4>Espresso šalica i pripadajući tanjurić</h4>
                </a>
                <p id="price">€7.00</p>
            </div>
    
            <div class="cont">
                <a href="../Posudica/Posudica.html" class="articleLink">
                    <img src="../../Stvari/WebpSlikeConvertane/Proizvodi/MalaPosudica/casica1.webp" class="img-fluid">
                    <h4>Posudica</h4>
                </a>
                <p id="price">€10.50</p>
            </div>
    
            <div class="cont">
                <a href="../UkrasniTanjur/Utanjur.html" class="articleLink">
                    <img src="../../Stvari/WebpSlikeConvertane/Proizvodi/UkrasniTanjur/tanjur2.webp" class="img-fluid">
                    <h4>Ukrasni tanjur</h4>
                </a>
                <p id="price">€10.50</p>
            </div>
    
            <div class="cont">
                <a href="../Šalica/Šalica.html" class="articleLink">
                    <img src="../../Stvari/WebpSlikeConvertane/Proizvodi/Salica/salica.webp" class="img-fluid">
                    <h4>Šalica</h4>
                </a>
                <p id="price">€5.00</p>
            </div>

            <div class="cont">
                <a href="../MalaZdjela/MZdjela.html" class="articleLink">
                    <img src="../../Stvari/WebpSlikeConvertane/Proizvodi/MalaZdjela/malaZdjela.webp" class="img-fluid">
                    <h4>Mala zdjela</h4>
                </a>
                <p id="price">€2.50</p>
            </div>

            <div class="cont">
                <a href="../Prsten/Prsten.html" class="articleLink">
                    <img src="../../Stvari/WebpSlikeConvertane/Proizvodi/Prsten/prsten2.webp" class="img-fluid">
                    <h4>Prsten</h4>
                </a>
                <p id="price">€10.50</p>
            </div>
        </div>
    </section>

    <footer>
        <aside class="footerContentCont">
            <section class="logoSocialMedia">
                <a href="../../Kodovi/Homepage/ifkaPifka.html">
                    <img src="../../Stvari/WebpSlikeConvertane/logoTransWebp.webp" class="logo">
                </a>
                <div class="logos">
                    <a href="https://www.instagram.com/pifkaifka" target="_blank"><i class="bi bi-instagram" id="white"></i></a>
                    <a href="https://www.facebook.com/pifka.ifka/?locale=hr_HR" target="_blank"><i class="bi bi-facebook" id="white"></i></a>
                    <a href="#"><i class="bi bi-twitter" id="white"></i></a>
                </div> 
            </section>
               
        
            <section class="footerLinks">
                <div class="linksContent">
                    <b id="white">Dronax</b>
                    <a href="#">O nama</a>
                    <a href="../../Kodovi/Kontakt/kontakt.html">Kontakt</a>
                    <a href="#">Dostava</a>
                </div>

                <div class="linksContent">
                    <b id="white">Info</b>
                    <a href="#">FAQ</a>
                    <a href="#">Uvjeti poslovanja</a>
                    <a href="#">Politika privatnosti</a>
                </div>

                <div class="linksContent">
                    <b id="white">Kupnja</b>
                    <a href="#">Naćini plaćanja</a>
                    <a href="#">Profil</a>
                    <a href="#">Košarica</a>
                </div>
            </section>
        </aside>    

        <div class="autorCopyright">
            <p>© 2025 Ifka Pifka d.o.o. Sva prava zadržana.</p>
        </div>
    </footer>


</main>
<script>
document.addEventListener('DOMContentLoaded', () => {
    const cartContainer = document.getElementById('cartContainer');
    let cart;

    try {
        cart = JSON.parse(localStorage.getItem('cart'));
        if (!Array.isArray(cart)) throw new Error("Cart nije niz");
    } catch (e) {
        console.error("Greška prilikom čitanja košarice:", e);
        cartContainer.innerHTML = `<div class="empty-cart-message">Košarica je prazna.</div>`;
        return;
    }

    if (cart.length === 0) {
        cartContainer.innerHTML = `<div class="empty-cart-message">Košarica je prazna.</div>`;
        return;
    }

    let totalPrice = 0;

    cart.forEach((item, index) => {
        const name = item.name || "Nepoznato";
        const quantity = parseInt(item.quantity) || 1;
        const image = item.image || "";
        let price = 0;

        try {
            price = parseFloat((item.price || "0").toString().replace("€", "").replace(",", "."));
        } catch {
            price = 0;
        }

        const itemTotal = price * quantity;
        totalPrice += itemTotal;

        const div = document.createElement('div');
        div.classList.add('card', 'mb-3');
        div.innerHTML = `
        <div class="row no-gutters rounded border shadow-sm">
            <div class="col-md-4" style="padding: 0; display: flex; align-items: center;">
            <img src="${item.image}" alt="${item.name}" style="width: 100%; max-height: 350px; object-fit: cover; border-radius: 0; display: block;">
            </div>
            <div class="col-md-8 d-flex flex-column justify-content-start p-3" >
                <h5 class="font-weight-bold" style="font-size: 1.3rem;">${name}</h5>
                <p style="font-size: 1.1rem;">Cijena: ${price.toFixed(2)}€</p>
                <p style="font-size: 1.1rem;">Količina: ${quantity}</p>
                <button class="btn btn-danger mt-2 py-2" style="width: 120px;" onclick="removeFromCart(${index})">Ukloni</button>
            </div>
        </div>
        `;
        cartContainer.appendChild(div);
    });

    const totalDiv = document.createElement('div');
    totalDiv.classList.add('text-right', 'mt-4');
    totalDiv.innerHTML = `<h4>Ukupno: ${totalPrice.toFixed(2)}€</h4>`;
    cartContainer.appendChild(totalDiv);
});

function removeFromCart(index) {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    cart.splice(index, 1);
    localStorage.setItem('cart', JSON.stringify(cart));
    location.reload();
}
</script>

<script src="../hamburgerMenu.js"></script>
<script src="../Kosarica/cart.js"></script>

</body>
</html>